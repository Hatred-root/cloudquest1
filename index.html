<!doctype html> <html lang="tr"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width,initial-scale=1" /> <title>Bulut Kaşifleri — Mini Cloud CTF</title> <style> :root { color-scheme: light dark; } body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; line-height: 1.5; } .container { max-width: 960px; margin: 0 auto; } .card { border: 1px solid #d0d7de; border-radius: 12px; padding: 1rem 1.25rem; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.04); } h1 { margin: 0 0 0.5rem 0; font-size: 1.6rem; } p { margin: 0.25rem 0 1rem 0; color: #57606a; } .row { display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; } input[type="url"] { flex: 1; min-width: 320px; padding: .6rem .7rem; border-radius: 10px; border: 1px solid #d0d7de; } button { padding: 0.6rem 1rem; border: 1px solid #d0d7de; border-radius: 10px; cursor: pointer; background: #0969da; color: #fff; font-weight: 600; } button:hover { background: #085ec3; } #status { margin-top: .5rem; } table { width: 100%; border-collapse: collapse; margin-top: 1rem; } th, td { border: 1px solid #d0d7de; padding: .6rem .5rem; text-align: left; } th { background: #f6f8fa; } caption { text-align: left; font-weight: 600; margin-bottom: .25rem; color: #57606a; } footer { margin-top: 1.25rem; color: #6e7781; font-size: 0.9rem; } @media (prefers-color-scheme: dark) { .card { background: #0d1117; border-color: #30363d; } p, footer, caption { color: #8b949e; } th { background: #161b22; } input[type="url"] { background: #0d1117; color: #c9d1d9; border-color: #30363d; } button { background: #238636; border-color: #2ea043; } button:hover { background: #2ea043; } } </style> </head> <body> <div class="container"> <div class="card"> <h1>Bulut Üssü</h1> <p>Google Sheets’ten web’de yayımlanmış CSV linkini gir ve tabloyu görüntüle.</p> <div class="row"> <input id="csvUrl" type="url" placeholder="https://docs.google.com/spreadsheets/d/e/.../pub?gid=0&single=true&output=csv" /> <button id="fetchBtn">Verileri Getir</button> </div> <p id="status" aria-live="polite"></p> <div id="result"></div> <footer> İpucu: Sheets’te Dosya → Web’de yayımla → Biçim: CSV → bağlantıyı buraya yapıştır. </footer> </div> </div> <script> // İstersen buraya kendi CSV linkini koy: kutu otomatik dolar const DEFAULT_CSV = ""; const csvInput = document.getElementById('csvUrl'); const fetchBtn = document.getElementById('fetchBtn'); const statusEl = document.getElementById('status'); const resultEl = document.getElementById('result'); if (DEFAULT_CSV) csvInput.value = DEFAULT_CSV; fetchBtn.addEventListener('click', async () => { const url = (csvInput.value || "").trim(); if (!url) { statusEl.textContent = "Lütfen yayımlanmış Google Sheets CSV URL'i gir."; return; } resultEl.innerHTML = ""; statusEl.textContent = "Veri indiriliyor..."; try { const res = await fetch(url, { mode: "cors" }); if (!res.ok) throw new Error("HTTP " + res.status + " — " + res.statusText); const text = await res.text(); const rows = parseCSV(text); if (rows.length === 0) { statusEl.textContent = "CSV boş görünüyor."; return; } resultEl.innerHTML = buildTable(rows); statusEl.textContent = `Başarılı: ${rows.length - 1} satır yüklendi.`; } catch (err) { console.error(err); statusEl.textContent = "Hata: CSV indirilemedi veya biçim beklenenden farklı. " + err.message; } }); // Satır sonlarını normalize ederek farklı platformları destekler function normalizeNewlines(t) { return t.replace(/\r\n/g, '\n').replace(/\r/g, '\n'); } // Çift tırnaklı alanları ve virgül ayırıcıyı destekleyen basit ayrıştırıcı function parseCSV(text) { text = normalizeNewlines(text); const rows = []; let row = []; let cell = ""; let inQuotes = false; for (let i = 0; i < text.length; i++) { const c = text[i]; const next = text[i + 1]; if (inQuotes) { if (c === '"' && next === '"') { // kaçışlı tırnak cell += '"'; i++; } else if (c === '"') { inQuotes = false; } else { cell += c; } } else { if (c === '"') { inQuotes = true; } else if (c === ',') { row.push(cell); cell = ""; } else if (c === '\n') { row.push(cell); rows.push(row); row = []; cell = ""; } else { cell += c; } } } // Son hücre/satır if (cell.length > 0 || row.length > 0) { row.push(cell); rows.push(row); } // Tamamen boş satırları temizle return rows.filter(r => r.some(v => v !== "")); } function escapeHtml(s) { return String(s).replace(/[&<>"']/g, m => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" }[m])); } function buildTable(rows) { const [header, ...data] = rows; const thead = `<thead><tr>${header.map(h => `<th>${escapeHtml(h)}</th>`).join("")}</tr></thead>`; const tbody = `<tbody>${data.map(r => { const tds = header.map((_, i) => `<td>${escapeHtml(r[i] ?? "")}</td>`).join(""); return `<tr>${tds}</tr>`; }).join("")}</tbody>`; return `<table>${thead}${tbody}</table>`; } </script> </body> </html>
