<!doctype html> <html lang="tr"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width,initial-scale=1" /> <title>Bulut Kaşifleri — Mini Cloud CTF</title> <style> :root { color-scheme: light dark; } body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 2rem; line-height: 1.5; } .container { max-width: 960px; margin: 0 auto; } .card { border: 1px solid #d0d7de; border-radius: 12px; padding: 1rem 1.25rem; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,0.04); } h1 { margin: 0 0 0.5rem 0; font-size: 1.6rem; } p { margin: 0.25rem 0 1rem 0; color: #57606a; } .row { display: flex; gap: .5rem; flex-wrap: wrap; align-items: center; } input[type="url"] { flex: 1; min-width: 320px; padding: .6rem .7rem; border-radius: 10px; border: 1px solid #d0d7de; } button { padding: 0.6rem 1rem; border: 1px solid #d0d7de; border-radius: 10px; cursor: pointer; background: #0969da; color: #fff; font-weight: 600; } button:hover { background: #085ec3; } #status { margin-top: .5rem; } table { width: 100%; border-collapse: collapse; margin-top: 1rem; } th, td { border: 1px solid #d0d7de; padding: .6rem .5rem; text-align: left; } th { background: #f6f8fa; } footer { margin-top: 1.25rem; color: #6e7781; font-size: 0.9rem; } @media (prefers-color-scheme: dark) { .card { background: #0d1117; border-color: #30363d; } p, footer { color: #8b949e; } th { background: #161b22; } input[type="url"] { background: #0d1117; color: #c9d1d9; border-color: #30363d; } button { background: #238636; border-color: #2ea043; } button:hover { background: #2ea043; } } </style> </head> <body> <div class="container"> <div class="card"> <h1>Bulut Üssü</h1> <p>Google Sheets’ten web’de yayımlanmış CSV linki otomatik yüklenecek. Butona basınca tablo gelir.</p> <div class="row"> <input id="csvUrl" type="url" placeholder="CSV URL" /> <button id="fetchBtn">Verileri Getir</button> </div> <p id="status" aria-live="polite"></p> <div id="result"></div> <footer> İpucu: Sheets → Dosya → Web’de yayımla → output=csv. </footer> </div> </div> <script> // 1) SENİN CSV URL'İN: otomatik doldurulur const DEFAULT_CSV = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSLyhTVEVj79s54cQvk9TtlslBlW7NyH0Cql-h38FBfR2vnMgIK2ttD4Qb1hjwJBfXHEtqZRabznHZk/pub?gid=0&single=true&output=csv"; // 2) DOM referansları const csvInput = document.getElementById('csvUrl'); const fetchBtn = document.getElementById('fetchBtn'); const statusEl = document.getElementById('status'); const resultEl = document.getElementById('result'); // 3) Sayfa yüklenince kutuyu doldur ve otomatik çek (istiyorsan iptal edebilirsin) window.addEventListener('DOMContentLoaded', () => { csvInput.value = DEFAULT_CSV; // Otomatik çekme: yorumu kaldırırsan sayfa açılır açılmaz yükler // loadCSV(csvInput.value); }); // 4) Buton tıklama fetchBtn.addEventListener('click', () => { const url = (csvInput.value || "").trim(); if (!url) { statusEl.textContent = "Lütfen CSV URL gir."; return; } loadCSV(url).catch(err => { console.error(err); statusEl.textContent = "Hata: " + err.message; }); }); // 5) CSV yükleme async function loadCSV(url) { resultEl.innerHTML = ""; statusEl.textContent = "Veri indiriliyor..."; const res = await fetch(url, { mode: "cors" }); if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`); const text = await res.text(); const rows = parseCSV(text); if (!rows.length) { statusEl.textContent = "CSV boş."; return; } resultEl.innerHTML = buildTable(rows); statusEl.textContent = `Başarılı: ${rows.length - 1} satır yüklendi.`; } // 6) CSV ayrıştırıcı (tırnak kaçışları + farklı satır sonları) function normalizeNewlines(t) { return t.replace(/\r\n/g, '\n').replace(/\r/g, '\n'); } function parseCSV(text) { text = normalizeNewlines(text); const rows = []; let row = [], cell = "", inQuotes = false; for (let i = 0; i < text.length; i++) { const c = text[i], next = text[i+1]; if (inQuotes) { if (c === '"' && next === '"') { cell += '"'; i++; } else if (c === '"') { inQuotes = false; } else { cell += c; } } else { if (c === '"') inQuotes = true; else if (c === ',') { row.push(cell); cell = ""; } else if (c === '\n') { row.push(cell); rows.push(row); row = []; cell = ""; } else { cell += c; } } } if (cell.length > 0 || row.length > 0) { row.push(cell); rows.push(row); } return rows.filter(r => r.some(x => x !== "")); } // 7) Tablo oluşturma function escapeHtml(s) { return String(s).replace(/[&<>"']/g, m => ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" }[m])); } function buildTable(rows) { const [header, ...data] = rows; const thead = `<thead><tr>${header.map(h=>`<th>${escapeHtml(h)}</th>`).join('')}</tr></thead>`; const tbody = `<tbody>${data.map(r=>`<tr>${header.map((_,i)=>`<td>${escapeHtml(r[i]??"")}</td>`).join('')}</tr>`).join('')}</tbody>`; return `<table>${thead}${tbody}</table>`; } </script> </body> </html>
